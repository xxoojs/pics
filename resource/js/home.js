function showBoxBdSection(){var self=$(this),tab=self.attr("tab");self.addClass("box-tab-on").siblings().removeClass("box-tab-on"),$("#"+tab).show().siblings().hide()}function makeHuituTaskScroll(element,childTagName){var len,availWidth=window.screen.availWidth,size=element.find(childTagName).length;len=availWidth>1130?5:3,size<=len||Tool.animateScroll(element,childTagName)}function setSliderShadow(){var ext="",po="555";screen.availWidth<=1250&&(ext="_990",po="493"),$(".notice-bar").length>0&&(po="600",screen.availWidth<=1250&&(po="538")),$("body").attr("style","background:url("+getAppHost().static+"/images/home_bg"+ext+".gif) no-repeat center "+po+"px #F8F8F9;")}function setSliderShadowBarClose(){var ext="",po="555";screen.availWidth<=1250&&(ext="_990",po="493"),$("body").attr("style","background:url("+getAppHost().static+"/images/home_bg"+ext+".gif) no-repeat center "+po+"px #F8F8F9;")}function initTrade(){var tradeBox=$("#J_tradeBox"),len=tradeBox.find("li").length;if(5!=len)return len<5?void tradeBox.css("height","auto"):void(len>5&&makeHuituTaskScroll(tradeBox,"li"))}function loadLoginedInfo(){var getApp=getAppHost(),str="";if(checkLogin()){var userinfo=NI.getCookie("NSESSIONID").split("|"),userid=userinfo[1],username=decodeURIComponent(userinfo[2]),userAvatar=NI.getCookie("nipicAvatar"+userid);userAvatar?(str='<div class="fl avatar-frame">',str+='<div class="avatar-frame-block png24"></div>',str+='<img src="'+userAvatar+'" class="avatar-img" alt="'+username+'" /></div>',str+='<div class="home-login-info">',str+='<p class="ellipsis"><b class="font14">'+username+"</b></p>",str+='<a href="'+getApp.hi+"/people/"+userid+'" hidefocus="true" target="_self" title="涓汉涓婚〉" class="inline-block simple-btn simple-btn2">涓汉涓婚〉</a> ',str+='<a href="'+getApp.user+'/upload/index" hidefocus="true" target="_self" title="涓婁紶浣滃搧" class="inline-block simple-btn simple-btn2">涓婁紶浣滃搧</a>',str+="</div>",$("#J_homeLoginBox").html(str)):$.ajax({type:"POST",url:"/UserAjax/AccountInfo",data:{userid:userid},dataType:"json",success:function(r){if("2000"==r.code){var face=r.data.face;str='<div class="fl avatar-frame">',str+='<div class="avatar-frame-block png24"></div>',str+='<img src="'+face+'" class="avatar-img" alt="'+username+'" /></div>',str+='<div class="home-login-info">',str+='<p><b class="font14">'+username+"</b></p>",str+='<a href="'+getApp.hi+"/people/"+userid+'" hidefocus="true" target="_self" title="涓汉涓婚〉" class="inline-block simple-btn simple-btn2">涓汉涓婚〉</a> ',str+='<a href="'+getApp.user+'/upload/index" hidefocus="true" target="_self" title="涓婁紶浣滃搧" class="inline-block simple-btn simple-btn2">涓婁紶浣滃搧</a>',str+="</div>",$("#J_homeLoginBox").html(str),NI.setCookie("nipicAvatar"+userid,face,{path:"/",domain:"nipic.com"})}},error:function(){"undefined"!=typeof console&&console.log("鐢ㄦ埛淇℃伅鍔犺浇澶辫触")}})}else str='<div class="fl avatar-frame">',str+='<div class="avatar-frame-block png24"></div>',str+='<img src="'+getApp.static+'/images/noface.png" class="avatar-img" alt="鏃犲ご鍍�" /></div>',str+='<div class="home-login-info">',str+='<p><span class="font-tahoma">Hi</span>锛屾偍濂斤紒</p>',str+='<a href="'+getApp.login+"/?backurl="+getApp.user+'" hidefocus="true" target="_self" title="鐧诲綍" class="inline-block simple-btn simple-btn1">鐧诲綍</a> ',str+='<a href="'+getApp.login+"/reg?backurl="+getApp.user+'" hidefocus="true" target="_self" title="娉ㄥ唽" class="inline-block simple-btn simple-btn2">娉ㄥ唽</a>',str+="</div>",$("#J_homeLoginBox").html(str)}$(function(){$("#indexSlider").NISlider(),$(".show-classify").hover(function(){$(this).find(".show-box-bd").css("height","auto")},function(){$(this).find(".show-box-bd").removeAttr("style")}),$(".famous-people,.original-recommend").on("mouseover",".box-tab",showBoxBdSection),makeHuituTaskScroll($(".huitu-task-list"),"li"),makeHuituTaskScroll($(".original-trend-bd"),"li"),$(".works-item").hover(function(){$(this).addClass("works-item-hover")},function(){$(this).removeClass("works-item-hover")}),setSliderShadow(),initTrade(),loadLoginedInfo();var noticeBar=$(".notice-bar");if(noticeBar.length>0){noticeBar.show();var noticeBox=$(".notice-list-box");noticeBox.find("li").length>1&&Tool.animateScroll(noticeBox,"li"),$(document).find(".notice-list-close").click(function(){noticeBar.hide(),setSliderShadowBarClose()})}});